<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4 Screen Layout</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="screen top-left">
            <button class="toggle-btn">Expand</button>
        </div>
        <div class="screen top-right">
            <button class="toggle-btn">Expand</button>
        </div>
        <div class="screen bottom-left">
            <button class="toggle-btn">Expand</button>
        </div>
        <div class="screen bottom-right">
            <button class="toggle-btn">Expand</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body, html {
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #f0f0f0;
}

.container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    width: 100vw;
    height: 100vh;
    gap: 2px;
    transition: all 0.5s ease;
}

.screen {
    position: relative;
    border: 2px solid grey;
    background-color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.5s ease;
}

.top-left { grid-area: 1 / 1 / 2 / 2; }
.top-right { grid-area: 1 / 2 / 2 / 3; }
.bottom-left { grid-area: 2 / 1 / 3 / 2; }
.bottom-right { grid-area: 2 / 2 / 3 / 3; }

.toggle-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 5px 10px;
    cursor: pointer;
    background-color: #333;
    color: #fff;
    border: none;
    border-radius: 5px;
}

/* Minimized screens */
.minimized {
    height: calc(100vh / 3 - 4px); /* Each minimized screen height */
    width: 100%;
}

/* Stacked screens on the right side */
.stacked {
    display: flex;
    flex-direction: column;
    position: absolute;
    right: 0;
    width: calc(50vw - 4px); /* Minimized width on the right side */
}

/* Expanded screen */
.expanded {
    grid-column: 1 / 2;
    grid-row: 1 / 3;
    width: 50vw;
    height: 100vh;
}

</style>

<script>
const screens = document.querySelectorAll('.screen');
let activeScreen = null;  // Keeps track of the currently expanded screen

function handleClick(event) {
    const screen = event.target.closest('.screen');  // The clicked screen

    if (activeScreen === screen) {
        // If the clicked screen is already maximized, minimize it back to default
        resetLayout();
    } else {
        // If a different screen is clicked, maximize it and minimize others
        expandScreen(screen);
    }
}

function resetLayout() {
    // Remove the stacked container if it exists
    const stack = document.querySelector('.stacked');
    if (stack) {
        stack.remove();
    }

    // Reset all screens to the grid layout
    screens.forEach(screen => {
        screen.classList.remove('expanded', 'minimized');
        screen.querySelector('.toggle-btn').textContent = 'Expand'; // Reset button text
    });

    // Clear the activeScreen variable
    activeScreen = null;

    // Restore the grid layout by ensuring container behaves as a grid again
    document.querySelector('.container').style.gridTemplateColumns = '1fr 1fr';
    document.querySelector('.container').style.gridTemplateRows = '1fr 1fr';
}

function expandScreen(screen) {
    // First, reset any previously expanded layout
    resetLayout();

    // Set the clicked screen as expanded
    screen.classList.add('expanded');
    screen.querySelector('.toggle-btn').textContent = 'Minimize';  // Change button text

    // Create a stacked container for minimized screens
    const stack = document.createElement('div');
    stack.classList.add('stacked');
    document.body.appendChild(stack);

    // Minimize the other screens and move them to the right-side stack
    screens.forEach(otherScreen => {
        if (otherScreen !== screen) {
            otherScreen.classList.add('minimized');  // Minimize the other screens
            stack.appendChild(otherScreen);  // Move minimized screens to stack
        }
    });

    // Update active screen
    activeScreen = screen;
}

// Select all toggle buttons
const buttons = document.querySelectorAll('.toggle-btn');

// Add event listeners to all buttons to handle clicks
buttons.forEach(button => {
    button.addEventListener('click', handleClick);
});
</script>
